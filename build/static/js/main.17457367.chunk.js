(window["webpackJsonpdr-net-fe"]=window["webpackJsonpdr-net-fe"]||[]).push([[0],{308:function(e,t,a){e.exports=a(619)},313:function(e,t,a){},615:function(e,t){},618:function(e,t,a){},619:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(8),l=a.n(c),o=(a(313),a(31)),i=a(32),s=a(34),u=a(33),m=a(35),d=a(12),f=a(625),h=a(620),g=a(188),p=a(11);function v(e){return r.a.createElement(p.q,null,r.a.createElement(p.p,{outerRadius:100,data:e.data},r.a.createElement(p.m,null),r.a.createElement(p.l,{dataKey:"category"}),r.a.createElement(p.n,null),r.a.createElement(p.o,{dataKey:"F1",stroke:"#5366ac",fill:"#5366ac",fillOpacity:.6})))}var E=function(e){return e?-1e-4===e?"Extrapolated ":(100*e).toFixed(2):0},y=function(e){var t=e.replace(/_/g," ");return t.charAt(0).toUpperCase()+t.slice(1)};function b(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function x(e){return Math.floor(Math.random()*Math.floor(e))}function O(e,t){return e.name>t.name?1:e.name<t.name?-1:0}var C=function(e){var t={Singapore:0,"Hong Kong":0,Japan:0},a={},n=new Set(["Singapore","Hong Kong","Japan"]);return e.forEach((function(e){var n=e.date_of_invoice,r=e.country_of_consumption,c=e.total_amount;"No Prediction"!==n&&"No Prediction"!==r&&"No Prediction"!==c&&(c=parseInt(c),t[r]+=c,a[n]?a[n][r]?a[n][r]+=c:a[n][r]=c:(a[n]={},a[n][r]=c))})),[Object.keys(a).map((function(e){var t={name:e};return n.forEach((function(n){a[e][n]?t[n]=a[e][n]:t[n]=0})),t})),t]};function k(e){return r.a.createElement("div",{className:"main-card",onClick:function(){return e.handlePageChange({key:"ACCURACY"})}},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"ACCURACY"),r.a.createElement("h1",{style:{fontSize:"4rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-20px",color:"#5366ac"}},e.data?E(e.data.accuracy):0,"%"),r.a.createElement("h4",null,"Overall Classifier Accuracy")),r.a.createElement("div",{className:"chart-container"},r.a.createElement(v,{data:function(e){if(e=e){for(var t=[],a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];new Set(["macro avg","accuracy","weighted avg"]).has(r)||t.push({category:r,F1:E(e[r]["f1-score"])})}return t}}(e.data)})))}var S=function(e){var t=Math.PI/180,a=e.cx,n=e.cy,c=e.midAngle,l=e.innerRadius,o=e.outerRadius,i=e.startAngle,s=e.endAngle,u=e.fill,m=e.payload,d=e.percent,f=e.value,h=Math.sin(-t*c),g=Math.cos(-t*c),v=a+(o+10)*g,E=n+(o+10)*h,y=a+(o+30)*g,b=n+(o+30)*h,x=y+22*(g>=0?1:-1),O=b,C=g>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement("text",{x:a,y:n,dy:8,textAnchor:"middle",fill:u},m.name),r.a.createElement(p.r,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:i,endAngle:s,fill:u}),r.a.createElement(p.r,{cx:a,cy:n,startAngle:i,endAngle:s,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(v,",").concat(E,"L").concat(y,",").concat(b,"L").concat(x,",").concat(O),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:x,cy:O,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:x+12*(g>=0?1:-1),y:O,textAnchor:C,fill:"#333"},"".concat(f," Files")),r.a.createElement("text",{x:x+12*(g>=0?1:-1),y:O,dy:18,textAnchor:C,fill:"#999"},"".concat((100*d).toFixed(2),"% of Total")))},j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.getCatTotal=function(e){var t={};return e.forEach((function(e){t[e.category]?t[e.category]++:t[e.category]=1})),Object.keys(t).map((function(e){return{name:e,value:t[e]}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.q,null,r.a.createElement(p.k,null,r.a.createElement(p.j,{activeIndex:this.state.activeIndex,activeShape:S,data:this.getCatTotal(this.props.data),innerRadius:70,outerRadius:100,fill:"#02afbc",dataKey:"value",onMouseEnter:this.onPieEnter})))}}]),t}(n.PureComponent);function A(e){return r.a.createElement("div",{className:"main-card",onClick:function(){return e.handlePageChange({key:"INVOICES"})}},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"INVOICES"),r.a.createElement("h1",{style:{fontSize:"4rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-20px",color:"#02afbc"}},e.invoicesData.filter((function(e){return"unprocessed"!==e.status})).length),r.a.createElement("h4",null,"Total Documents Processed")),r.a.createElement("div",{className:"chart-container"},r.a.createElement(j,{data:e.invoicesData.filter((function(e){return"unprocessed"!==e.status&&e.category}))})))}var D=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.data.sort(O);return e=(e=e.slice(Math.max(e.length-5,1))).map((function(e){return{name:e.name,value:e.Singapore+e["Hong Kong"]+e.Japan,amt:0}})),r.a.createElement(p.q,null,r.a.createElement(p.i,{data:e},r.a.createElement(p.h,{type:"monotone",dataKey:"value",stroke:"#6f2282",strokeWidth:2})))}}]),t}(n.PureComponent);function w(e){var t=e.processed[0].filter((function(e){return e.name.indexOf("2019")>-1}));return r.a.createElement("div",{className:"main-card",onClick:function(){return e.handlePageChange({key:"TRENDS"})}},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"TRENDS"),r.a.createElement("h1",{style:{fontSize:"4rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-20px",color:"#6f2282"}},"$",b(function(e){var t=0;return e&&e.forEach((function(e){t+=e.Singapore,t+=e["Hong Kong"],t+=e.Japan})),t}(t))),r.a.createElement("h4",null,"Year to Date Spending")),r.a.createElement("div",{className:"chart-container"},r.a.createElement(D,{data:t})))}function I(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,r.a.createElement(d.a,{style:{transform:"scale(2)",marginBottom:"24px"},type:"upload"}),r.a.createElement("br",null),"UPLOAD FILE"),r.a.createElement("input",{type:"file",name:"file",onChange:function(e){e.preventDefault();var t=new FormData;t.append("file",e.target.files[0]),fetch("http://localhost:5000/upload",{method:"POST",body:t})}})))}function P(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(k,{handlePageChange:e.handlePageChange,data:e.accuracyData}),r.a.createElement(A,{invoicesData:e.invoicesData,handlePageChange:e.handlePageChange}),r.a.createElement(w,{invoicesData:e.invoicesData,processed:e.processed,handlePageChange:e.handlePageChange})),r.a.createElement(I,null))}function _(e){return r.a.createElement(p.q,null,r.a.createElement(p.d,{data:function(e){for(var t=[],a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];"macro avg"!==r&&"weighted avg"!==r&&"accuracy"!==r&&t.push({category:r,"f1-score":E(e[r]["f1-score"])})}return t}(e.data),layout:"vertical",margin:{top:5,right:20,left:35,bottom:5}},r.a.createElement(p.t,{type:"number"}),r.a.createElement(p.u,{type:"category",dataKey:"category"}),r.a.createElement(p.e,{strokeDasharray:"3 3"}),r.a.createElement(p.s,null),r.a.createElement(p.g,null),r.a.createElement(p.c,{dataKey:"f1-score",fill:"#5366ac"})))}var N=a(621),R=N.a.Column;function T(e){return r.a.createElement(N.a,{dataSource:function(e){for(var t=[],a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];new Set(["macro avg","accuracy","weighted avg"]).has(r)||t.push({category:r,F1:E(e[r]["f1-score"]),Recall:E(e[r].recall),Support:e[r].support,Precision:E(e[r].precision)})}return t}(e.data)},r.a.createElement(R,{title:"Category",dataIndex:"category",key:"category"}),r.a.createElement(R,{title:"Precision",dataIndex:"Precision",key:"Precision"}),r.a.createElement(R,{title:"Recall",dataIndex:"Recall",key:"Recall"}),r.a.createElement(R,{title:"F1",dataIndex:"F1",key:"F1"}),r.a.createElement(R,{title:"Support",dataIndex:"Support",key:"Support"}))}function F(e){return r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"2rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-10px",color:e.color}},e.value),r.a.createElement("h4",null,e.label))}function K(e){var t=e.accuracyData;return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{className:"main-card-no-hover"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"AGGREGATE ACCURACY"),r.a.createElement("h1",{style:{fontSize:"4rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-20px",color:"#5366ac"}},E(t.accuracy)+"%"),r.a.createElement("h4",null,"Overall Classifier Accuracy"),r.a.createElement("hr",{style:{margin:"40px"}}),r.a.createElement(F,{value:t["macro avg"]&&t["macro avg"].support,label:"Total Tokens Classified",color:"#5366ac"}),r.a.createElement("hr",{style:{margin:"40px"}}),r.a.createElement("p",null,"Weighted Average"),r.a.createElement("div",{style:{marginLeft:"10%",width:"80%",display:"flex",justifyContent:"space-between"}},r.a.createElement(F,{value:t["weighted avg"]&&E(t["weighted avg"].precision)+"%",label:"Precision",color:"grey"}),r.a.createElement(F,{value:t["weighted avg"]&&E(t["weighted avg"].recall)+"%",label:"Recall",color:"grey"}),r.a.createElement(F,{value:t["weighted avg"]&&E(t["weighted avg"]["f1-score"])+"%",label:"F1",color:"grey"})),r.a.createElement("hr",{style:{margin:"40px"}}),r.a.createElement("p",null,"Macro Average"),r.a.createElement("div",{style:{marginLeft:"10%",width:"80%",display:"flex",justifyContent:"space-between"}},r.a.createElement(F,{value:t["macro avg"]&&E(t["macro avg"].precision)+"%",label:"Precision",color:"grey"}),r.a.createElement(F,{value:t["macro avg"]&&E(t["macro avg"].recall)+"%",label:"Recall",color:"grey"}),r.a.createElement(F,{value:t["macro avg"]&&E(t["macro avg"]["f1-score"])+"%",label:"F1",color:"grey"})))),r.a.createElement("div",{className:"main-card-no-hover"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"CATEGORY BREAKDOWN"),r.a.createElement("h4",null,"Figures in Percent"),r.a.createElement("div",{className:"chart-container-tall"},r.a.createElement(_,{data:t})))),r.a.createElement("div",{className:"main-card-no-hover"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"CLASSIFIER METRICS")),r.a.createElement(T,{data:t})))}var M=a(626),B=a(624),H=a(39),J=a(294),Y=a(137),W=a(190),L=a(622),V=a(623);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(Y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U=r.a.createContext(),q=L.a.create()((function(e){var t=e.form,a=(e.index,Object(W.a)(e,["form","index"]));return r.a.createElement(U.Provider,{value:t},r.a.createElement("tr",a))})),$=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},(function(){e&&a.input.focus()}))},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields((function(t,c){t&&t[e.currentTarget.id]||(a.toggleEdit(),r(G({},n,{},c)))}))},a.renderCell=function(e){a.form=e;var t=a.props,n=t.children,c=t.dataIndex,l=t.record,o=t.title;return a.state.editing?r.a.createElement(L.a.Item,{style:{margin:0}},e.getFieldDecorator(c,{rules:[{required:!0,message:"".concat(o," is required.")}],initialValue:l[c]})(r.a.createElement(V.a,{ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:a.toggleEdit},n)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=Object(W.a)(e,["editable","dataIndex","title","record","index","handleSave","children"]);return r.a.createElement("td",n,t?r.a.createElement(U.Consumer,null,this.renderCell):a)}}]),t}(r.a.Component),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).formatData=function(e){for(var t=[],a=0,n=0,r=Object.keys(e);n<r.length;n++){var c=r[n];c.indexOf("_conf")>-1&&(t.push({key:a,name:y(c.replace("_conf","")),confidence:E(e[c])+"%",value:e[c.replace("_conf","")]}),a++)}return t},a.handleSave=function(e){var t=Object(J.a)(a.state.dataSource),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,G({},r,{},e)),a.setState({dataSource:t})},a.handleSubmit=function(){var e=a.props,t=e.filename,n=e.socket,r={filename:t,data:a.state.dataSource};n.emit("req_invoice_details_update",r)},a.columns=[{title:"Field",dataIndex:"name",width:"30%"},{title:"Value",dataIndex:"value",editable:!0},{title:"Confidence",dataIndex:"confidence"}],a.state={dataSource:a.formatData(a.props.data)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:q,cell:$}},n=this.columns.map((function(t){return t.editable?G({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return r.a.createElement("div",null,r.a.createElement("h2",null,this.props.filename),r.a.createElement(N.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:n,pagination:!1}),r.a.createElement(H.a,{type:"primary",style:{marginTop:"12px",right:"0px"},onClick:this.handleSubmit},"Validate & Save All"))}}]),t}(r.a.Component),Q={unprocessed:"red",processing:"orange",processed:"blue",reviewed:"green"},Z=["Telco","Consultants","Services","Hardware","Others"],ee=[{text:"Jan",value:"-01"},{text:"Feb",value:"-02"},{text:"Mar",value:"-03"},{text:"Apr",value:"-04"},{text:"May",value:"-05"},{text:"Jun",value:"-06"},{text:"Jul",value:"-07"},{text:"Aug",value:"-08"},{text:"Sep",value:"-09"},{text:"Oct",value:"-10"},{text:"Nov",value:"-11"},{text:"Dec",value:"-12"}],te=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={filteredInfo:null,sortedInfo:null,data:[],visible:!1},a.handleChange=function(e,t,n){a.setState({filteredInfo:t,sortedInfo:n})},a.clearFilters=function(){a.setState({filteredInfo:null})},a.clearAll=function(){a.setState({filteredInfo:null,sortedInfo:null})},a.formatAccCol=function(e){return e<30?"red":e<60?"orange":"green"},a.showModal=function(e,t){a.setState({visible:!0,selected:e,filename:t})},a.handleOk=function(e){a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1,selected:null})},a.processData=function(e){var t=!0,a=!1,n=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var l=r.value,o=0,i=0;for(var s in l)s.indexOf("_conf")>-1&&l[s]>0&&(i++,o+=l[s]);l.accuracy=(o/i*100).toFixed(2)}}catch(u){a=!0,n=u}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}return e},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.sortedInfo,n=t.filteredInfo;n=n||{};var c=[{title:"File Name",dataIndex:"id",key:"id",sorter:function(e,t){return e.id<t.id},sortOrder:"id"===(a=a||{}).columnKey&&a.order,ellipsis:!0,render:function(t,a){return r.a.createElement("a",{onClick:function(){return e.showModal(a,t)}},t)}},{title:"Provider",dataIndex:"name_of_provider",key:"name_of_provider",sorter:function(e,t){return e.name_of_provider<t.name_of_provider},sortOrder:"name_of_provider"===a.columnKey&&a.order,ellipsis:!0},{title:"Date",dataIndex:"date_of_invoice",key:"date_of_invoice",filters:ee,filteredValue:n.date_of_invoice||null,onFilter:function(e,t){return t.date_of_invoice.includes(e)},sorter:function(e,t){return e.date_of_invoice.length-t.date_of_invoice.length},sortOrder:"date_of_invoice"===a.columnKey&&a.order,ellipsis:!0},{title:"Category",dataIndex:"category",key:"category",filters:Z.map((function(e){return{text:e,value:e}})),filteredValue:n.category||null,onFilter:function(e,t){return t.category.includes(e)},sorter:function(e,t){return e.category.length-t.category.length},sortOrder:"category"===a.columnKey&&a.order,ellipsis:!0},{title:"Country",dataIndex:"country_of_consumption",key:"country_of_consumption",filters:[{text:"Singapore",value:"Singapore"},{text:"Hong Kong",value:"Hong Kong"},{text:"Japan",value:"Japan"}],filteredValue:n.country_of_consumption||null,onFilter:function(e,t){return t.country_of_consumption&&t.country_of_consumption.includes(e)},sorter:function(e,t){return e.country_of_consumption.length-t.country_of_consumption.length},sortOrder:"country_of_consumption"===a.columnKey&&a.order,ellipsis:!0},{title:"Status",dataIndex:"status",key:"status",filters:Object.keys(Q).map((function(e){return{text:e,value:e}})),filteredValue:n.status||null,onFilter:function(e,t){return t.status.includes(e)},sortOrder:"status"===a.columnKey&&a.order,ellipsis:!0,render:function(e){return r.a.createElement(M.a,{color:Q[e],key:e},e)}},{title:"Confidence",dataIndex:"accuracy",key:"accuracy",filters:[{text:"High",value:[100,70]},{text:"Mid",value:[70,30]},{text:"Low",value:[30,0]}],filteredValue:n.accuracy||null,onFilter:function(e,t){return t.accuracy>e[1]&&t.accuracy<=e[0]},sorter:function(e,t){return e.accuracy-t.accuracy},sortOrder:"accuracy"===a.columnKey&&a.order,ellipsis:!0,render:function(t){return r.a.createElement(M.a,{color:e.formatAccCol(t),key:t},t,"%")}}];return r.a.createElement("div",{className:"card"},r.a.createElement(B.a,{title:"File Details",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,width:"80%"},this.state.visible&&r.a.createElement(X,{socket:this.props.socket,data:this.state.selected,filename:this.state.filename})),r.a.createElement("div",null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(H.a,{onClick:this.clearFilters},"Clear filters"),r.a.createElement(H.a,{onClick:this.clearAll},"Clear filters and sorters")),r.a.createElement(N.a,{columns:c,dataSource:this.processData(this.props.invoicesData),onChange:this.handleChange})))}}]),t}(r.a.Component),ae=["#5366ac","#02afbc","#6f2282"],ne=function(e){var t=Math.PI/180,a=e.cx,n=e.cy,c=e.midAngle,l=e.innerRadius,o=e.outerRadius,i=e.startAngle,s=e.endAngle,u=e.fill,m=e.payload,d=e.percent,f=(e.name,e.value),h=Math.sin(-t*c),g=Math.cos(-t*c),v=a+(o+10)*g,E=n+(o+10)*h,y=a+(o+30)*g,x=n+(o+30)*h,O=y+22*(g>=0?1:-1),C=x,k=g>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement("text",{x:a,y:n,dy:8,textAnchor:"middle",fill:u},m.name),r.a.createElement(p.r,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:i,endAngle:s,fill:u}),r.a.createElement(p.r,{cx:a,cy:n,startAngle:i,endAngle:s,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(v,",").concat(E,"L").concat(y,",").concat(x,"L").concat(O,",").concat(C),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:O,cy:C,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:O+12*(g>=0?1:-1),y:C,textAnchor:k,fill:"#333"},"$".concat(b(f))),r.a.createElement("text",{x:O+12*(g>=0?1:-1),y:C,dy:18,textAnchor:k,fill:"#999"},"(".concat((100*d).toFixed(2),"%)")))},re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.data),r.a.createElement(p.k,{width:500,height:400},r.a.createElement(p.j,{activeIndex:this.state.activeIndex,activeShape:ne,data:this.props.data,cx:250,cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"value",onMouseEnter:this.onPieEnter},this.props.data.map((function(e,t){return r.a.createElement(p.f,{key:"cell-".concat(t),fill:ae[t%ae.length]})}))))}}]),t}(n.PureComponent);function ce(e){var t,a=(t=e.invoicesData[1],Object.keys(t).map((function(e){return{name:e,value:t[e]}})));return r.a.createElement("div",{className:"card"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"EXPENSE BY COUNTRIES"),r.a.createElement("h1",{style:{fontSize:"4rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-20px",color:"#02afbc"}},"$",b(function(e){var t=0;return e.forEach((function(e){"null"!==e.name&&(t+=e.value)})),t}(a))),r.a.createElement("h4",null,"Total Across all Countries")),r.a.createElement("div",{className:"chart-container"},r.a.createElement(re,{data:a})))}var le=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.b,{width:900,height:400,data:this.props.data,margin:{top:10,right:10,left:45,bottom:45}},r.a.createElement(p.e,{strokeDasharray:"3 3"}),r.a.createElement(p.t,{dataKey:"name",label:{value:"Date (YYYY-MM-DD)",position:"bottom"}}),r.a.createElement(p.u,{label:{value:"Total Spending (SGD)",angle:-90,position:"left"}}),r.a.createElement(p.s,null),r.a.createElement(p.a,{type:"monotone",dataKey:"Singapore",stackId:"1",stroke:"#8884d8",fill:"#5366ac"}),r.a.createElement(p.a,{type:"monotone",dataKey:"Hong Kong",stackId:"1",stroke:"#82ca9d",fill:"#02afbc"}),r.a.createElement(p.a,{type:"monotone",dataKey:"Japan",stackId:"1",stroke:"#ffc658",fill:"#6f2282"}))}}]),t}(n.PureComponent);function oe(e){return r.a.createElement("div",{className:"main-card2"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"COUNTRY TRENDS"),r.a.createElement("div",{style:{marginLeft:"10%",width:"80%",display:"flex",justifyContent:"space-around"}},r.a.createElement("div",null,r.a.createElement("strong",null,"Singapore"),r.a.createElement("h1",{style:{fontSize:"3rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-10px",marginTop:"-10px",color:"#6f2282"}},"$",b(e.invoicesData[1].Singapore)),r.a.createElement("h4",null,"Total Spending")),r.a.createElement("div",null,r.a.createElement("strong",null,"Hong Kong"),r.a.createElement("h1",{style:{fontSize:"3rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-10px",marginTop:"-10px",color:"#6f2282"}},"$",b(e.invoicesData[1]["Hong Kong"])),r.a.createElement("h4",null,"Total Spending")),r.a.createElement("div",null,r.a.createElement("strong",null,"Japan"),r.a.createElement("h1",{style:{fontSize:"3rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-10px",marginTop:"-10px",color:"#6f2282"}},"$",b(e.invoicesData[1].Japan)),r.a.createElement("h4",null,"Total Spending")))),r.a.createElement("div",{className:"chart-container"},r.a.createElement(le,{data:e.invoicesData[0].sort(O)})))}var ie=function(e){return r.a.createElement(p.d,{width:500,height:350,data:e.data,margin:{top:5,right:20,left:20,bottom:5}},r.a.createElement(p.e,{strokeDasharray:"3 3"}),r.a.createElement(p.t,{dataKey:"name"}),r.a.createElement(p.u,null),r.a.createElement(p.s,null),r.a.createElement(p.g,null),r.a.createElement(p.c,{dataKey:"Amount",fill:"#6F2282"},e.data.map((function(e,t){return r.a.createElement(p.f,{key:"cell-".concat(t),fill:"#6F2282"})}))))};function se(e){var t=function(e){var t={},a=[0,"",""];return e.forEach((function(e){var n=e.category,r=e.total_amount,c=e.id,l=e.date_of_invoice;(r=parseInt(r))>a[0]&&(a=[r,c,l]),t[n]&&!isNaN(r)?t[n]+=r:t[n]=r})),[Object.keys(t).map((function(e){return{name:e,Amount:t[e]}})).filter((function(e){return"null"!==e.name})),a]},a=t(e.invoicesData);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"EXPENSE BY CATEGORY"),r.a.createElement("h4",null,"In SGD"),r.a.createElement("div",{className:"chart-container"},r.a.createElement(ie,{data:t(e.invoicesData)[0]})),r.a.createElement("h1",null,"Single Biggest Expense"),r.a.createElement("h1",{style:{fontSize:"3rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-10px",marginTop:"-10px",color:"#8884d8"}},"$",b(a[1][0])),r.a.createElement("h4",null,a[1][1]," ",r.a.createElement("strong",null,a[1][2]))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}function ue(e){return r.a.createElement(p.i,{width:900,height:500,data:e.dateDate,margin:{top:5,right:10,left:20,bottom:50}},r.a.createElement(p.e,{strokeDasharray:"3 3"}),r.a.createElement(p.t,{dataKey:"name"}),r.a.createElement(p.u,{label:{value:"Total Spending (SGD)",angle:-90,position:"left"}}),r.a.createElement(p.s,null),r.a.createElement(p.g,null),e.dataCategories.map((function(e){return r.a.createElement(p.h,{type:"monotone",dataKey:e,stroke:"rgb(".concat(x(200),", 34, ").concat(x(255),")")})})))}function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){Object(Y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function fe(e){var t=function(e){var t=new Set([]);return e.forEach((function(e){Object.keys(e).forEach((function(e){return t.add(e)}))})),t.delete("name"),t.delete("null"),Array.from(t)},a=function(e){var a=new Set(t(e));return e.map((function(e){var t={};return a.forEach((function(e){t[e]=0})),de({},t,{},e)})).sort(O)},n=function(e){var t={};return e.forEach((function(e){var a=e.category,n=e.total_amount,r=(e.id,e.date_of_invoice);n=parseInt(n),"No Prediction"===r||isNaN(n)||(t[r]?t[r][a]?t[r][a]+=n:t[r][a]=n:(t[r]={},t[r][a]=n))})),Object.keys(t).map((function(e){return de({name:e},t[e])})).filter((function(e){return"null"!==e.name}))}(e.invoicesData);return r.a.createElement("div",{className:"main-card2"},r.a.createElement("div",{style:{marginTop:"36px",textAlign:"center"}},r.a.createElement("h1",null,"CATEGORY TRENDS"),r.a.createElement("div",{style:{marginLeft:"10%",width:"80%",display:"flex",justifyContent:"space-around"}},function(e){var t=[],a=e.length,n=e[a-1],r=e[a-2];return Object.keys(n).forEach((function(e){"name"!==e&&"null"!==e&&t.push({category:e,difference:n[e]-r[e]})})),t}(a(n)).map((function(e){return r.a.createElement("div",null,r.a.createElement("strong",null,e.category),r.a.createElement("h1",{style:{fontSize:"3rem",fontFamily:"Roboto",fontWeight:"300",marginBottom:"-10px",color:"#5366ac"}},"$",e.difference),r.a.createElement("h4",null,"Monthly Change"))})))),r.a.createElement("div",{className:"chart-container"},r.a.createElement(ue,{dataCategories:t(n),dateDate:a(n)})))}function he(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(ce,{invoicesData:e.processed}),r.a.createElement(oe,{invoicesData:e.processed})),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(fe,{invoicesData:e.invoicesData}),r.a.createElement(se,{invoicesData:e.invoicesData})))}var ge=a(293),pe=a.n(ge),ve=(a(618),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handlePageChange=function(e){a.setState({page:e.key})},a.notificationHandler=function(e){var t;"PROCESSING"===e.title&&(t=r.a.createElement(d.a,{type:"sync",spin:!0,style:{color:"orange"}})),"PROCESSING COMPLETED"!==e.title&&"INVOICE UPDATED"!==e.title||(t=r.a.createElement(d.a,{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"})),f.a.open({message:e.title,description:e.content,icon:t,onClick:null})},a.state={page:"HOME",accuracy:{},invoices:[],socket:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=pe()("http://localhost:5000");t.on("invoices_update",(function(t){return e.setState({invoices:JSON.parse(t)})})),t.on("status_update",(function(t){return e.notificationHandler(JSON.parse(t))})),t.on("accuracy_metrics",(function(t){e.setState({accuracy:JSON.parse(t)})})),t.emit("req_invoices"),t.emit("req_metrics"),this.setState({socket:t})}},{key:"render",value:function(){var e=h.a.Header,t=h.a.Content,a=h.a.Footer;return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{className:"layout"},r.a.createElement(e,null,r.a.createElement("div",{className:"logo"},"Dr-NET Document Classifier"),r.a.createElement(g.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["HOME"],style:{lineHeight:"64px"}},r.a.createElement(g.a.Item,{onClick:this.handlePageChange,key:"HOME"},"Home"),r.a.createElement(g.a.Item,{onClick:this.handlePageChange,key:"ACCURACY"},"Accuracy"),r.a.createElement(g.a.Item,{onClick:this.handlePageChange,key:"INVOICES"},"Invoices"),r.a.createElement(g.a.Item,{onClick:this.handlePageChange,key:"TRENDS"},"Trends"))),r.a.createElement(t,{style:{padding:"30px",background:"#eaeaea",overflowY:"scroll"}},"HOME"===this.state.page&&r.a.createElement(P,{handlePageChange:this.handlePageChange,socket:this.state.socket,invoicesData:this.state.invoices,accuracyData:this.state.accuracy,processed:C(this.state.invoices)}),"ACCURACY"===this.state.page&&r.a.createElement(K,{handlePageChange:this.handlePageChange,socket:this.state.socket,accuracyData:this.state.accuracy}),"INVOICES"===this.state.page&&r.a.createElement(te,{handlePageChange:this.handlePageChange,socket:this.state.socket,invoicesData:this.state.invoices}),"TRENDS"===this.state.page&&r.a.createElement(he,{processed:C(this.state.invoices),socket:this.state.socket,invoicesData:this.state.invoices})),r.a.createElement(a,{style:{textAlign:"center",background:"#eaeaea"}},"2019 NUS BT3101 CAPSTONE GROUP 2")))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[308,1,2]]]);
//# sourceMappingURL=main.17457367.chunk.js.map